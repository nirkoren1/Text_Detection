(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{72:function(e,t,n){e.exports=n(86)},80:function(e,t,n){},81:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(55),i=n.n(o),l=(n(80),n(81),n(131)),c=n(127);function s(){return r.a.createElement(c.a,{sx:{display:"flex"}},r.a.createElement(l.a,null))}var m=n(125),u=n(133),g=n(132),d=n(134),p=n(126);function h(e){return r.a.createElement(m.a,{sx:{maxWidth:448,mx:"auto"}},r.a.createElement(g.a,{style:{zIndex:1001}},e.bbs,r.a.createElement(u.a,{component:"img",image:e.image,alt:""})),r.a.createElement(d.a,{sx:{marginTop:"auto"}},r.a.createElement(p.a,{size:"small",color:"primary",onClick:e.buttonOne},"Predict"),e.loadingOrButton),r.a.createElement("div",{sx:{marginLeft:"auto"}},e.inp))}var f=n(59),E=n.n(f),b=n(123),w=n(129);function y(e){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",overflowX:"auto",width:"100%"}},r.a.createElement(w.a,{sx:{width:"60%",height:181},cols:j.length,rowHeight:164},j.map((t,n)=>r.a.createElement("img",{style:{maxHeight:164,mx:"auto",cursor:"pointer"},onClick:()=>e.setImage(t.img),srcSet:"".concat(t.img,"?w=164&h=164&fit=crop&auto=format&dpr=2 2x"),src:"".concat(t.img,"?w=164&h=164&fit=crop&auto=format"),alt:t.title,loading:"lazy"}))))}const j=[{img:"grafity.jpg",title:"grafity"},{img:"large_andrae-ricketts-346066.jpg",title:"Times Square"},{img:"street.jpg",title:"street sign"},{img:"mall-shop.jpg",title:"mall shop"},{img:"london-buses.jpg",title:"bus"},{img:"newspapers.jpg",title:"news papers"},{img:"market2.jpg",title:"market"},{img:"cheese.jpg",title:"cheese"},{img:"books_covers.png",title:"books_covers"},{img:"document.jpg",title:"document"},{img:"somthing.jpg",title:"somthing"},{img:"code.jpg",title:"code"}];var x=function(){const[e,t]=Object(a.useState)(null),[n,o]=Object(a.useState)(""),[i,l]=Object(a.useState)(""),c=Object(a.useRef)(null),m=Object(a.useRef)(null),[u,g]=Object(a.useState)([]),[d,f]=Object(a.useState)(0),[w,j]=Object(a.useState)(0),[x,v]=Object(a.useState)([window.innerWidth,window.innerHeight]);Object(a.useEffect)(()=>{const e=()=>{v([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let O="",k=null;const S=()=>{c.current.files[0];try{o(URL.createObjectURL(e))}catch{o(e)}""!=O&&l(C)};Object(a.useEffect)(()=>{S()},[e]);const C=r.a.createElement(p.a,{size:"small",color:"primary",onClick:()=>{o(O),l(T)}},"Show Detection"),T=r.a.createElement(p.a,{size:"small",color:"primary",onClick:S},"Show Image"),B=r.a.createElement(p.a,{component:"label",variant:"contained",startIcon:r.a.createElement(E.a,null)},"Upload file",r.a.createElement("input",{type:"file",ref:c,onChange:async e=>{if(e.target.files&&e.target.files[0]){const n=e.target.files[0];t(n);const a=new Image;a.src=URL.createObjectURL(n),a.onload=(()=>{f(a.width),j(a.height)}),g([])}},style:{display:"none"}}));return r.a.createElement("div",null,r.a.createElement(y,{setImage:async e=>{(async function(e){try{const n=await fetch(e);if(!n.ok)throw new Error("Failed to fetch file");const a=await n.arrayBuffer();return new Blob([a])}catch(t){return console.error("Error:",t.message),null}})(e).then(n=>{const a=function(e,t){try{return new File([e],t,{type:"image/jpeg"})}catch(n){return console.error("Error creating File:",n.message),null}}(n,e);t(a);const r=new Image;r.src=e,r.onload=(()=>{f(r.width),j(r.height)}),g([])})}}),r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"20px"}},r.a.createElement(h,{image:n,buttonOne:async()=>{if(!e)return void alert("Please select an image first!");const t={url:await function(e){return new Promise((t,n)=>{const a=new FileReader;a.onloadend=(()=>{t(a.result)}),a.onerror=(e=>{n(e)}),a.readAsDataURL(e)})}(e)};l(s);const n=await async function(e){const t=await fetch("https://ai.kiddo.pro/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}(t);O=n.data_url,k=n.text_bbs;const a=448*w/d;Math.max(448,a),g([]);for(let e=0;e<k.length;e++){const t=448*(k[e][0][3]-k[e][0][1])/d,n=(k[e][0][4]-k[e][0][2])*a/w,o=448*k[e][0][1]/d,i=k[e][0][2]*a/w,l=k[e][1];g(e=>[...e,r.a.createElement(b.a,{title:l,arrow:!0},r.a.createElement("div",{style:{top:"".concat(i/a*100,"%"),left:"".concat(o/448*100,"%"),position:"absolute",zIndex:1e3,padding:"0px",border:"1px solid #00ff00",borderRadius:"4px",minHeight:"0px",minWidth:"0px",height:"".concat(n/a*100,"%"),width:"".concat(t/448*100,"%")}}))])}l(C)},loadingOrButton:i,inp:B,bbs:u,ref:m})))},v=n(61),O=n.n(v),k=n(60),S=n.n(k),C=n(130),T=n(128);var B=function(){const[e,t]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{document.body.className=e?"dark-mode":"",document.getElementsByTagName("span")[0].style.color=e?"lightblue":"blue",document.getElementsByTagName("span")[1].style.color=e?"lightblue":"blue"},[e]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{style:{justifyContent:"center",display:"flex"}},r.a.createElement(c.a,{sx:{width:"80%",maxWidth:700,position:"relative"}},r.a.createElement(C.a,{variant:"h2",gutterBottom:!0},"Scene OCR"),r.a.createElement(C.a,{variant:"subtitle2",gutterBottom:!0,style:{textAlign:"left"}},"Demo of Scene-ocr from the repo:",r.a.createElement(T.a,{href:"https://github.com/nirkoren1/Text_Detection",underline:"hover"}," https://github.com/nirkoren1/Text_Detection"),r.a.createElement(C.a,{variant:"subtitle2",gutterBottom:!0},"click on a picture or upload one, then click on ",r.a.createElement("span",{style:{color:"lightblue"}},"PREDICT"),r.a.createElement("br",null)," click on ",r.a.createElement("span",{style:{color:"blue"}},"SHOW DETECTION")," to see the heatmap image")))),r.a.createElement(p.a,{onClick:()=>{t(!e)},style:{position:"fixed",left:10,top:10}},e?r.a.createElement(S.a,null):r.a.createElement(O.a,null)),r.a.createElement(x,null))};var I=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,135)).then(t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:o,getTTFB:i}=t;n(e),a(e),r(e),o(e),i(e)})};i.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null))),I()}},[[72,1,2]]]);
//# sourceMappingURL=main.b5e1b97f.chunk.js.map